<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<meta name="Description" content="Enter your description here" />
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/css/bootstrap.min.css"
		/>
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
		/>
		<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<link rel="stylesheet" href="assets/css/style.css" />
		<link rel="stylesheet" href="assets/css/bookingList.css" />
		<link rel="stylesheet" href="assets/css/createNewBooking.css" />
		<link
			href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css"
			rel="stylesheet"
		/>
		<title>Title</title>
	</head>
	<body onload="toggleSidebar()">
		<div class="js-render">
			<side-bar></side-bar>
		</div>
		<div id="main">
			<top-bar></top-bar>
			<div class="container-fluid py-5">
				<form>
					<h4>Edit</h4>

					<div>
						<div class="row mb-5">
							<div class="col">
								<label>Booking Number</label>
								<input
									type="text"
									id="bookingNumber"
									class="form-control"
									readonly
								/>
							</div>
							<div class="col">
								<label>Packing Date</label>
								<input type="date" id="dates" class="form-control" readonly />
							</div>
							<div class="col">
								<label>No of Bookings</label>
								<input type="text" id="booking" class="form-control" />
							</div>
						</div>

						<!-- add -->
						<table class="table" id="mytab" hidden>
							<tbody>
								<tr>
									<td>AC 1 Ton</td>
									<td>500</td>
								</tr>
								<tr>
									<td>AC 2 Ton</td>
									<td>0.0</td>
								</tr>
								<tr>
									<td>AC Window</td>
									<td>200</td>
								</tr>
							</tbody>
						</table>

						<table class="text-center table">
							<th>Name</th>
							<th>Quantity (pcs)</th>
							<th>Weight (per pcs)</th>
							<th>Weight Types</th>
							<th>Total Weight (KG)</th>
							<th>Customs Charge</th>
							<th>Discount</th>
							<th>Subtotal</th>
							<tbody id="prevProductTable">
								<tr>
									<td>AC Window</td>
									<td>10</td>
									<td>10</td>
									<td>KG</td>
									<td>100</td>
									<td>100</td>
									<td>10</td>
									<td>100</td>
								</tr>
								<tr>
									<td>AC Window</td>
									<td>10</td>
									<td>10</td>
									<td>KG</td>
									<td>100</td>
									<td>100</td>
									<td>10</td>
									<td>100</td>
								</tr>
							</tbody>
						</table>

						<!-- calculation table start -->
						<div class="row mt-3">
							<div class="col-12">
								<div class="card mb-5">
									<div class="card-header">Product List</div>
									<div class="card-body">
										<div class="table-responsive">
											<table
												class="table text-center"
												id="row"
												onkeyup="test()"
												onclick="test()"
											>
												<thead>
													<th>Name</th>
													<th>Quantity (pcs)</th>
													<th>Weight (per pcs)</th>
													<th>Weight Types</th>
													<th>Total Weight (KG)</th>
													<th>Customs Charge</th>
													<th>Discount</th>
													<th>Subtotal</th>
													<th>Action</th>
												</thead>
												<tbody id="product_list">
													<tr class="anchors1" id="rw1">
														<td>
															<select
																class="form-control re_size products my-select"
																data-live-search="true"
																data-container="body"
																style="width: 200px"
																id="product_1"
																name="products"
																onchange="myF(1)"
																onclick="myFunction(1)"
															>
																<option value="Choose Products">
																	Choose Products
																</option>
																<option value="AC 1 Ton">AC 1 Ton</option>
																<option value="AC 2 Ton">AC 2 Ton</option>
																<option value="AC Window">AC Window</option>
																<option value="Air Cooler">Air Cooler</option>
																<option value="Airon Machine">
																	Airon Machine
																</option>
																<option value="Antenna">Antenna</option>
																<option value="Soap">Soap</option>
															</select>
														</td>
														<td>
															<input
																type="number"
																min="0"
																id="no_of_p1"
																onkeyup="myFunction(1)"
																name="product"
																class="form-control re_size"
															/>
														</td>
														<td>
															<input
																type="number"
																min="0"
																id="weight1"
																onkeyup="myFunction(1)"
																onclick="myFunction(1)"
																name="weight"
																class="form-control weights re_size"
															/>
														</td>
														<td>
															<select
																name="weight"
																id="weight_units1"
																onclick="myFunction(1)"
																class="form-control re_size"
															>
																<option value="KG">KG</option>
																<option value="GRAM">GRAM</option>
															</select>
														</td>
														<td
															style="vertical-align: middle; text-align: center"
															id="totalWeight_1"
														>
															0
														</td>
														<td>
															<input
																type="number"
																min="0"
																id="customes_charge1"
																name="customes_charges"
																onkeyup="myFunction(1)"
																class="form-control customes_charges re_size"
																readonly
															/>
														</td>
														<td>
															<input
																type="number"
																min="0"
																id="discount1"
																name="discount"
																onkeyup="myFunction(1)"
																class="form-control discount re_size"
															/>
														</td>
														<td
															style="vertical-align: middle; text-align: center"
															class="subtotals"
															id="subtotal1"
														>
															0
														</td>
														<td>
															<i
																class="far fa-trash-alt btn"
																id="delete_modal1"
																onclick="myFunc(1)"
																style="font-size: 1rem"
															></i>
														</td>
													</tr>
												</tbody>
											</table>
										</div>
										<div class="table-responsive">
											<table class="table">
												<tr>
													<td>
														<label for="">Price Per KG</label>
														<input
															type="number"
															min="0"
															placeholder="Price Per KG"
															class="form-control mr-3"
															id="grossWeight"
															onkeyup="myFunction(1)"
														/>
													</td>
													<td>
														<label for="">Price Per Volume</label>
														<input
															type="number"
															min="0"
															placeholder="Price Per Volume"
															class="form-control"
															id="volumeWeight"
															onkeyup="myFunction(1)"
														/>
													</td>
													<td>
														<input
															type="text"
															class="mt-4"
															id="json"
															readonly
														/>
													</td>
													<td>
														<input
															type="text"
															id="subCalShow"
															class="
																form-control
																mt-4
																font-weight-bold
																text-right
															"
															style="
																border: none;
																background-color: transparent;
															"
															readonly
														/>
													</td>
													<td>
														<a
															class="btn btn-success create mt-4"
															id="addRow"
															style="display: none"
														>
															<i class="fas fa-plus-circle"></i>
														</a>
													</td>
												</tr>
												<tr>
													<td>
														<label for="">Gross Weight</label>
														<input
															type="number"
															min="0"
															placeholder="Gross Weight"
															class="form-control mr-3"
															id="subCalShow2"
															onkeyup="myFunction(1)"
														/>
													</td>
													<td>
														<label for="">Gross Volume</label>
														<input
															type="number"
															min="0"
															placeholder="Gross Volume"
															class="form-control"
															id="volumeWeightInput"
															onkeyup="myFunction(1)"
														/>
													</td>
												</tr>
											</table>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="d-flex justify-content-end pb-5">
						<input type="button" class="btn btn-default" value="Cancel" />
						<input type="submit" class="btn btn-info" value="Save" />
					</div>
				</form>
			</div>
			<footer-foot></footer-foot>
		</div>
		<section class="container">
			<div class="spinner spin-1"></div>
			<div class="spinner spin-2"></div>
			<div class="spinner spin-3"></div>
		</section>

		<script src="assets/js/sideNav.js"></script>
		<script src="assets/js/topNav.js"></script>
		<script src="assets/js/footer.js"></script>
		<script src="assets/js/nav.js" defer></script>
		<script src="assets/js/preloader.js"></script>
		<script src="assets/js/packingList.js"></script>
		<script src="assets/js/editpacking.js"></script>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.1/umd/popper.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/js/bootstrap.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

		<script>
			function test() {
				var lastindex = $("#row tr:last").find("td:eq(7)").text();
				// console.log(lastindex);
				if (lastindex != "0") {
					var count = 7;
					var tbl = $("#row tbody tr")
						.map(function (idxRow, ele) {
							var retVal = { id: ++idxRow };

							var $td = $(ele)
								.find("td")
								.map(function (idxCell, ele) {
									if (idxCell <= count - 1) {
										var input = $(ele).find(":input");

										if (input.length >= 1) {
											var attr = $("#row thead tr th").eq(idxCell).text();
											retVal[attr] = input.val();
										} else {
											var attr = $("#row thead tr th").eq(idxCell).text();
											retVal[attr] = $(ele).text();
										}
									}
								});
							return retVal;
						})
						.get();
					var jData = JSON.stringify(tbl)
						.replace(/ *\([^)]*\) */g, "")
						.replace(/\s(?=\w+":)/g, "");
					document.getElementById("json").value = jData;
				}
			}
		</script>
	</body>
</html>
